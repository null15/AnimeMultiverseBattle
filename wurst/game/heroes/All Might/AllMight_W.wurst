package AllMight_W

import Missiles
import ClosureForGroups
import EntitySystem
import abilityDefinitions
import RegisterEvents

function onCast()
        if GetSpellAbilityId() == TIME_STOP
                let caster = GetTriggerUnit()
                let center = vec2(GetSpellTargetX(), GetSpellTargetY())
                let radius = 600.

                forUnitsInRange(center, radius) (unit u) ->
                        if u != caster
                                u.pauseTimed(3.)

                for miss in Missiles.collection
                        if miss.getPos().toVec2().distanceTo(center) <= radius
                                miss.pauseTimed(3.)

init
        registerPlayerUnitEvent(EVENT_PLAYER_UNIT_SPELL_EFFECT, () -> onCast())
