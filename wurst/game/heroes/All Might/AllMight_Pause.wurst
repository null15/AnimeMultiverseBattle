package AllMight_Pause

import Missiles
import ClosureForGroups
import objectIDs
import RegisterEvents
import TimeStop

function onCast()
	if GetSpellAbilityId() == ALL_MIGHT_PAUSE1
		let caster = GetTriggerUnit()
		let center = vec2(GetSpellTargetX(), GetSpellTargetY())
		let radius = 600.

		forUnitsInRange(center, radius) (unit u) ->
			if u != caster
				u.timeStopTimed(5)

		for miss in Missiles.collection
			if miss.getPos().toVec2().distanceTo(center) <= radius
				miss.pauseTimed(5)

init
	registerPlayerUnitEvent(EVENT_PLAYER_UNIT_SPELL_EFFECT, () -> onCast())
