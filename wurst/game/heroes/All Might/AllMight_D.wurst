package AllMight_D

import abilityDefinitions
import Pull
import StatusEffects
import RegisterEvents
import ClosureForGroups

function onCast()
	if GetSpellAbilityId() == ALL_MIGHT_D
		let caster = GetTriggerUnit()
		let center = EventData.getSpellTargetPos()
		let radius = 600.
		forUnitsInRange(center, radius) (unit u) ->
			if u != caster and u.isAlive() and not u.isType(UNIT_TYPE_STRUCTURE) and caster.isEnemyOf(u)
				Pull.towardsPoint(u, center, 300., 0.5)
				Pull.toUnit(target, source, speed) (real t) ->
					// code here, but what for?
				slowUnit(u, 0.5, 3.)

init
	registerPlayerUnitEvent(EVENT_PLAYER_UNIT_SPELL_EFFECT, () -> onCast())
