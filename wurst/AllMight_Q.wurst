package AllMight_Q

import Missiles
import Entity
import abilityDefinitions

function onCast()
	if GetSpellAbilityId() == ALL_MIGHT_Q
		let caster = GetTriggerUnit()
		let uEnt = caster.getEntity()
		// we get uEnt pos, if we can't, then we take caster.getpos
		let start = uEnt != null ? uEnt.getPos().add(0, 0, 300) : caster.getPos3Real()
		let target = vec3(GetSpellTargetX(), GetSpellTargetY(), 500.)
		let m = new Missiles(start, target)
		m.setModel("Abilities\\Weapons\\FireBallMissile\\FireBallMissile.mdl")
		m.setSpeed(900.)
		m.launch()

init
	registerPlayerUnitEvent(EVENT_PLAYER_UNIT_SPELL_EFFECT, () -> onCast())
