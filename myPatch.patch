 (cd "$(git rev-parse --show-toplevel)" && git apply --3way <<'EOF' 
diff --git a/wurst/UI/CustomConsoleUI.wurst b/wurst/UI/CustomConsoleUI.wurst
new file mode 100644
index 0000000000000000000000000000000000000000..60c6e525a9ac8a6cf74b793a7801dae1877d853b
--- /dev/null
+++ b/wurst/UI/CustomConsoleUI.wurst
@@ -0,0 +1,169 @@
+package CustomConsoleUI
+
+import GameStatus
+import Timer
+
+@config
+constant bool WORKER_FACE = false
+
+framehandle idleWorkerButton
+framehandle idleWorkerButtonOverlay
+framehandle idleWorkerButtonOverlayParent
+framehandle customInventoryCover
+framehandle customInventoryCoverParent
+public string array data
+public int array dataCount
+constant int DATA_PAGE_SIZE = 11
+public real array x
+public real array y
+
+public function addCustomConsole(int index, string texture)
+    dataCount[index]++
+    data[index * DATA_PAGE_SIZE + dataCount[index]] = texture
+
+public function useCustomConsole(player p, int index)
+    if GetLocalPlayer() != p
+        return
+    if index < 1
+        index = GetHandleId(GetPlayerRace(p))
+    let pageValue = index * DATA_PAGE_SIZE
+    BlzFrameSetTexture(BlzGetFrameByName("CustomConsoleUI5T", 0), data[pageValue + 5], 0, false)
+    BlzFrameSetTexture(BlzGetFrameByName("CustomConsoleUI6T", 0), data[pageValue + 6], 0, false)
+    BlzFrameSetTexture(BlzGetFrameByName("CustomConsoleUI4T", 0), data[pageValue + 4], 0, false)
+    BlzFrameSetTexture(BlzGetFrameByName("CustomConsoleUI3T", 0), data[pageValue + 3], 0, false)
+    BlzFrameSetTexture(BlzGetFrameByName("CustomConsoleUI2TL", 0), data[pageValue + 2], 0, false)
+    BlzFrameSetTexture(BlzGetFrameByName("CustomConsoleUI2TR", 0), data[pageValue + 2], 0, false)
+    BlzFrameSetTexture(BlzGetFrameByName("CustomConsoleUI1T", 0), data[pageValue + 1], 0, false)
+    BlzFrameSetTexture(BlzGetFrameByName("CustomConsoleUI1B", 0), data[pageValue + 1], 0, false)
+    BlzFrameSetTexture(BlzGetFrameByName("CustomConsoleUI2B", 0), data[pageValue + 2], 0, false)
+    BlzFrameSetTexture(BlzGetFrameByName("CustomConsoleUI3B", 0), data[pageValue + 3], 0, false)
+    BlzFrameSetTexture(BlzGetFrameByName("CustomConsoleUI4B", 0), data[pageValue + 4], 0, false)
+    BlzFrameSetTexture(BlzGetFrameByName("CustomConsoleUI5B", 0), data[pageValue + 5], 0, false)
+    BlzFrameSetTexture(BlzGetFrameByName("CustomConsoleUI6B", 0), data[pageValue + 6], 0, false)
+    BlzFrameSetTexture(BlzGetFrameByName("CustomConsoleUIClock", 0), data[pageValue + 7], 0, true)
+    if GetLocalizedString("REFORGED") != "REFORGED"
+        BlzFrameSetTexture(BlzGetFrameByName("InventoryCoverTexture", 0), data[pageValue + 8], 0, true)
+        if WORKER_FACE
+            BlzFrameSetTexture(idleWorkerButtonOverlay, data[pageValue + 9], 0, false)
+    else
+        BlzFrameSetTexture(customInventoryCover, data[pageValue + 8], 0, true)
+    BlzFrameSetPoint(BlzGetFrameByName("CustomConsoleUIClock", 0), FRAMEPOINT_TOP, BlzGetFrameByName("ConsoleUI", 0), FRAMEPOINT_TOP, x[index], y[index])
+
+public function createCustomConsole()
+    BlzLoadTOCFile("war3mapimported\\CustomConsoleUI.toc")
+    BlzCreateSimpleFrame("CustomConsoleUITop", BlzGetFrameByName("ConsoleUI", 0), 0)
+    BlzFrameSetLevel(BlzGetFrameByName("CustomConsoleUITop", 0), 0)
+    if GetHandleId(BlzGetFrameByName("ConsoleBottomBar", 0)) > 0
+        BlzCreateSimpleFrame("CustomConsoleUIBottom", BlzGetFrameByName("ConsoleBottomBar", 0), 0)
+    else
+        BlzCreateSimpleFrame("CustomConsoleUIBottom", BlzGetFrameByName("ConsoleUI", 0), 0)
+    BlzFrameSetLevel(BlzGetFrameByName("CustomConsoleUIBottom", 0), 0)
+    if GetLocalizedString("REFORGED") != "REFORGED"
+        if WORKER_FACE
+            idleWorkerButton = BlzFrameGetChild(BlzFrameGetChild(BlzGetFrameByName("ConsoleBottomBar", 0), 3), 0)
+            idleWorkerButtonOverlayParent = BlzCreateSimpleFrame("SimpleTextureFrame", idleWorkerButton, 0)
+            idleWorkerButtonOverlay = BlzGetFrameByName("SimpleTextureFrameValue", 0)
+            BlzFrameSetAllPoints(idleWorkerButtonOverlay, idleWorkerButton)
+            BlzFrameSetLevel(idleWorkerButtonOverlayParent, 4)
+            if gameStatus == GameStatus.REPLAY
+                // BlzFrameSetVisible(idleWorkerButtonOverlayParent, false)
+                DoNothing()
+    else
+        customInventoryCoverParent = BlzCreateSimpleFrame("SimpleTextureFrame", BlzGetFrameByName("ConsoleUI", 0), 0)
+        BlzFrameSetLevel(customInventoryCoverParent, 4)
+        customInventoryCover = BlzGetFrameByName("SimpleTextureFrameValue", 0)
+        BlzFrameSetAbsPoint(customInventoryCover, FRAMEPOINT_BOTTOMRIGHT, 0.6, 0)
+        BlzFrameSetAbsPoint(customInventoryCover, FRAMEPOINT_TOPLEFT, 0.6 - 0.128, 0.2558)
+    BlzGetOriginFrame(ORIGIN_FRAME_ITEM_BUTTON, 0)
+    BlzGetFrameByName("InventoryCoverTexture", 0)
+    BlzGetFrameByName("CustomConsoleUIClock", 0)
+    BlzGetFrameByName("CustomConsoleUI5T", 0)
+    BlzGetFrameByName("CustomConsoleUI6T", 0)
+    BlzGetFrameByName("CustomConsoleUI4T", 0)
+    BlzGetFrameByName("CustomConsoleUI3T", 0)
+    BlzGetFrameByName("CustomConsoleUI2TL", 0)
+    BlzGetFrameByName("CustomConsoleUI2TR", 0)
+    BlzGetFrameByName("CustomConsoleUI1T", 0)
+    BlzGetFrameByName("CustomConsoleUI1B", 0)
+    BlzGetFrameByName("CustomConsoleUI2B", 0)
+    BlzGetFrameByName("CustomConsoleUI3B", 0)
+    BlzGetFrameByName("CustomConsoleUI4B", 0)
+    BlzGetFrameByName("CustomConsoleUI5B", 0)
+    BlzGetFrameByName("CustomConsoleUI6B", 0)
+
+function initConsole()
+    createCustomConsole()
+    useCustomConsole(GetLocalPlayer(), 0)
+
+function at0s()
+    initConsole()
+    GetExpiredTimer().destr()
+
+function update()
+    BlzFrameSetVisible(customInventoryCoverParent, not BlzFrameIsVisible(BlzGetOriginFrame(ORIGIN_FRAME_ITEM_BUTTON, 0)))
+
+init
+    var index = 0
+    index = GetHandleId(RACE_HUMAN)
+    addCustomConsole(index, "ui\\console\\human\\humanuitile01")
+    addCustomConsole(index, "ui\\console\\human\\humanuitile02")
+    addCustomConsole(index, "ui\\console\\human\\humanuitile03")
+    addCustomConsole(index, "ui\\console\\human\\humanuitile04")
+    addCustomConsole(index, "ui\\console\\human\\humanuitile05")
+    addCustomConsole(index, "ui\\console\\human\\humanuitile06")
+    addCustomConsole(index, "ui\\console\\human\\humanuitile-timeindicatorframe")
+    addCustomConsole(index, "ui\\console\\human\\humanuitile-inventorycover")
+    addCustomConsole(index, "ReplaceableTextures\\CommandButtons\\BTNPeasant")
+    x[index] = 0.0009
+    y[index] = 0.0
+    index = GetHandleId(RACE_ORC)
+    addCustomConsole(index, "ui\\console\\orc\\orcuitile01")
+    addCustomConsole(index, "ui\\console\\orc\\orcuitile02")
+    addCustomConsole(index, "ui\\console\\orc\\orcuitile03")
+    addCustomConsole(index, "ui\\console\\orc\\orcuitile04")
+    addCustomConsole(index, "ui\\console\\orc\\orcuitile05")
+    addCustomConsole(index, "ui\\console\\orc\\orcuitile06")
+    addCustomConsole(index, "ui\\console\\orc\\orcuitile-timeindicatorframe")
+    addCustomConsole(index, "ui\\console\\orc\\orcuitile-inventorycover")
+    addCustomConsole(index, "ReplaceableTextures\\CommandButtons\\BTNPeon")
+    x[index] = 0.0004
+    y[index] = 0.0
+    index = GetHandleId(RACE_UNDEAD)
+    addCustomConsole(index, "ui\\console\\undead\\undeaduitile01")
+    addCustomConsole(index, "ui\\console\\undead\\undeaduitile02")
+    addCustomConsole(index, "ui\\console\\undead\\undeaduitile03")
+    addCustomConsole(index, "ui\\console\\undead\\undeaduitile04")
+    addCustomConsole(index, "ui\\console\\undead\\undeaduitile05")
+    addCustomConsole(index, "ui\\console\\undead\\undeaduitile06")
+    addCustomConsole(index, "ui\\console\\undead\\undeaduitile-timeindicatorframe")
+    addCustomConsole(index, "ui\\console\\undead\\undeaduitile-inventorycover")
+    addCustomConsole(index, "ReplaceableTextures\\CommandButtons\\BTNAcolyte")
+    x[index] = 0.0009
+    y[index] = 0.0
+    index = GetHandleId(RACE_NIGHTELF)
+    addCustomConsole(index, "ui\\console\\nightelf\\nightelfuitile01")
+    addCustomConsole(index, "ui\\console\\nightelf\\nightelfuitile02")
+    addCustomConsole(index, "ui\\console\\nightelf\\nightelfuitile03")
+    addCustomConsole(index, "ui\\console\\nightelf\\nightelfuitile04")
+    addCustomConsole(index, "ui\\console\\nightelf\\nightelfuitile05")
+    addCustomConsole(index, "ui\\console\\nightelf\\nightelfuitile06")
+    addCustomConsole(index, "ui\\console\\nightelf\\nightelfuitile-timeindicatorframe")
+    addCustomConsole(index, "ui\\console\\nightelf\\nightelfuitile-inventorycover")
+    addCustomConsole(index, "ReplaceableTextures\\CommandButtons\\BTNWisp")
+    x[index] = 0.0009
+    y[index] = 0.0
+    index = GetHandleId(RACE_DEMON)
+    addCustomConsole(index, "ui\\console\\human\\humanuitile01")
+    addCustomConsole(index, "ui\\console\\human\\humanuitile02")
+    addCustomConsole(index, "ui\\console\\human\\humanuitile03")
+    addCustomConsole(index, "ui\\console\\human\\humanuitile04")
+    addCustomConsole(index, "ui\\console\\human\\humanuitile05")
+    addCustomConsole(index, "ui\\console\\human\\humanuitile06")
+    addCustomConsole(index, "ui\\console\\human\\humanuitile-timeindicatorframe")
+    addCustomConsole(index, "ui\\console\\human\\humanuitile-inventorycover")
+    addCustomConsole(index, "ReplaceableTextures\\CommandButtons\\BTNPeasant")
+    x[index] = 0.0
+    y[index] = 0.0
+    if GetLocalizedString("REFORGED") == "REFORGED"
+        CreateTimer()..startPeriodic(1.0/32.0, function update)
+    CreateTimer()..start(0., function at0s)
 
EOF
)